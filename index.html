<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>Voice Translator</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#0B1220">

<!-- PWA -->
<link rel="manifest" href="manifest.json">

<!-- iOS -->
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Voice Translator">

<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script>
pdfjsLib.GlobalWorkerOptions.workerSrc =
 "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";
</script>

<!-- OCR -->
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

<style>
:root{
 --bg1:#0B1220; --bg2:#0E1B2E;
 --card:rgba(255,255,255,.06);
 --stroke:rgba(255,255,255,.14);
 --text:rgba(255,255,255,.92);
 --muted:rgba(255,255,255,.7);
 --accent:#7C3AED;
 --danger:#EF4444;
}
*{box-sizing:border-box}
body{
 margin:0;font-family:"Segoe UI",Tahoma,sans-serif;
 min-height:100vh;display:flex;
 justify-content:center;align-items:center;
 padding:18px;color:var(--text);
 background:
  radial-gradient(900px 500px at 20% 15%, rgba(124,58,237,.35), transparent 55%),
  radial-gradient(900px 500px at 80% 20%, rgba(34,197,94,.25), transparent 55%),
  linear-gradient(135deg,var(--bg1),var(--bg2));
}
.wrap{width:100%;max-width:560px}
.card{
 background:var(--card);
 border:1px solid var(--stroke);
 border-radius:22px;
 padding:22px;
 box-shadow:0 25px 60px rgba(0,0,0,.45);
 backdrop-filter:blur(10px);
 text-align:center;
}
.topbar{
 display:grid;
 grid-template-columns:auto 1fr auto;
 align-items:center;
 margin-bottom:10px;
}
.logoLeft{
 font-size:30px;font-weight:900;
 background:linear-gradient(135deg,#7C3AED,#22C55E);
 -webkit-background-clip:text;
 -webkit-text-fill-color:transparent;
}
h1{margin:0;font-size:20px;font-weight:800}
.grid{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:10px;margin-top:10px
}
select,textarea,button{
 width:100%;
 border-radius:14px;
 border:1px solid rgba(255,255,255,.12);
 background:rgba(16,23,40,.65);
 color:var(--text);
 padding:12px;font-size:15px;
}
textarea{
 margin-top:10px;
 min-height:90px;
 resize:vertical;
 text-align:center;
}
.box{
 margin-top:12px;
 height:90px;
 overflow-y:auto;
 border-radius:16px;
 background:rgba(255,255,255,.06);
 border:1px solid rgba(255,255,255,.12);
 padding:12px;
 line-height:1.6;
 word-break:break-word;
 display:flex;
 align-items:center;
 justify-content:center;
 text-align:center;
}
.btnRow{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:10px;margin-top:12px
}
button{cursor:pointer;font-weight:700}
.primary{
 background:linear-gradient(135deg,var(--accent),#A78BFA);
 color:#0B1220
}
.secondary{background:rgba(255,255,255,.06)}
.danger{background:rgba(239,68,68,.18)}
@media(max-width:420px){
 .grid,.btnRow{grid-template-columns:1fr}
}
</style>
</head>

<body>
<div class="wrap">
<div class="card">

<div class="topbar">
 <div class="logoLeft">PZ</div>
 <h1>Voice Translator</h1>
 <div></div>
</div>

<div class="grid">
 <select id="sourceLang"></select>
 <select id="targetLang"></select>
</div>

<div class="box" id="translatedText">ØªØ±Ø¬Ù…Ù‡â€¦</div>

<textarea id="manualInput" placeholder="Ù…ØªÙ† Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³â€¦"></textarea>

<div class="btnRow">
 <button id="recordBtn" class="primary">ğŸ™ Ø´Ø±ÙˆØ¹ ØµØ­Ø¨Øª</button>
 <button id="translateBtn" class="secondary">ğŸ” ØªØ±Ø¬Ù…Ù‡ Ù…ØªÙ†</button>
</div>

<div class="btnRow">
 <button id="fileBtn" class="secondary">ğŸ“ Ø§ÙØ²ÙˆØ¯Ù† ÙØ§ÛŒÙ„ / Ø¯ÙˆØ±Ø¨ÛŒÙ†</button>
 <button id="stopVoiceBtn" class="secondary">â¹ ØªÙˆÙ‚Ù Ø®ÙˆØ§Ù†Ø¯Ù†</button>
</div>

<div class="btnRow">
 <button id="clearBtn" class="danger">ğŸ§¹ Ù¾Ø§Ú©â€ŒÚ©Ø±Ø¯Ù†</button>
</div>

<!-- âœ… Ø§ÛŒÙ†Ø¬Ø§ Ù…Ù‡Ù… Ø§Ø³Øª: capture Ø­Ø°Ù Ø´Ø¯Ù‡ -->
<input type="file" id="fileInput"
       accept=".txt,.pdf,image/*"
       hidden>

</div>
</div>

<script>
if("serviceWorker" in navigator){
 navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>
